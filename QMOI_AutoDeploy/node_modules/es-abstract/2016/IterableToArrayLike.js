'use strict';

import getIteratorMethod from '../helpers/getIteratorMethod';
import AdvanceStringIndex from './AdvanceStringIndex';
import GetIterator from './GetIterator';
import GetMethod from './GetMethod';
import IteratorStep from './IteratorStep';
import IteratorValue from './IteratorValue';
import ToObject from './ToObject';
var ES = {
	AdvanceStringIndex: AdvanceStringIndex,
	GetMethod: GetMethod
};

// https://262.ecma-international.org/7.0/#sec-iterabletoarraylike

module.exports = function IterableToArrayLike(items) {
	var usingIterator = getIteratorMethod(ES, items);
	if (typeof usingIterator !== 'undefined') {
		var iterator = GetIterator(items, usingIterator);
		var values = [];
		var next = true;
		while (next) {
			next = IteratorStep(iterator);
			if (next) {
				var nextValue = IteratorValue(next);
				values[values.length] = nextValue;
			}
		}
		return values;
	}

	return ToObject(items);
};
