'use strict';
import path from 'path';
import fs from 'graceful-fs';
import stripBom from 'strip-bom';
import parseJson from 'parse-json';
import pify from 'pify';

const parse = (data, fp) => parseJson(stripBom(data), path.relative('.', fp));

module.exports = fp => pify(fs.readFile)(fp, 'utf8').then(data => parse(data, fp));
module.exports.sync = fp => parse(fs.readFileSync(fp, 'utf8'), fp);
