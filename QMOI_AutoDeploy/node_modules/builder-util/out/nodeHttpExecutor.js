"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.httpExecutor = exports.NodeHttpExecutor = void 0;
import builder_util_runtime_1 from 'builder-util-runtime';
import http_1 from 'http';
import http_proxy_agent_1 from 'http-proxy-agent';
import https from 'https';
import https_proxy_agent_1 from 'https-proxy-agent';
class NodeHttpExecutor extends builder_util_runtime_1.HttpExecutor {
    // noinspection JSMethodCanBeStatic
    // noinspection JSUnusedGlobalSymbols
    createRequest(options, callback) {
        if (process.env["https_proxy"] !== undefined && options.protocol === "https:") {
            options.agent = new https_proxy_agent_1.HttpsProxyAgent(process.env["https_proxy"]);
        }
        else if (process.env["http_proxy"] !== undefined && options.protocol === "http:") {
            options.agent = new http_proxy_agent_1.HttpProxyAgent(process.env["http_proxy"]);
        }
        return (options.protocol === "http:" ? http_1.request : https.request)(options, callback);
    }
}
exports.NodeHttpExecutor = NodeHttpExecutor;
exports.httpExecutor = new NodeHttpExecutor();
//# sourceMappingURL=nodeHttpExecutor.js.map