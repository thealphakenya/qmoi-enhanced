<!-- Stripe payment form integration -->
<div class="payment-form">
  <div id="payment-element">
    <!-- Stripe Elements will mount here -->
  </div>
  
  <div id="card-errors" role="alert"></div>
  
  <button id="submit-payment" type="button">
    <div id="payment-spinner"></div>
    <span>Pay Now</span>
  </button>
  
  <div id="payment-success">
    Payment successful! Processing your purchase...
  </div>
</div>

<script src="https://js.stripe.com/v3/"></script>
<script src="/js/stripe-payment.js"></script>
<link rel="stylesheet" href="/css/stripe-payment.css">

<script>
document.addEventListener('DOMContentLoaded', async () => {
  // Initialize Stripe with public key
  const stripeHandler = await window.initializeStripePayment(
    '${STRIPE_PUBLIC_KEY}',  // Will be replaced by server
    'payment-element'
  );
  
  // Handle form submission
  document.getElementById('submit-payment').addEventListener('click', async (e) => {
    e.preventDefault();
    await stripeHandler.startPaymentFlow();
  });
  
  // Handle successful payment
  window.addEventListener('payment-success', () => {
    // Redirect to confirmation or update UI
    setTimeout(() => {
      window.location.href = '/deals/confirmation';
    }, 1500);
  });
});
</script>